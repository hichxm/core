{"version":3,"sources":["command/base/Reload.ts"],"names":[],"mappings":";;;;;;;;AAEA,wCAAqC;AACrC,4DAA6C;AAC7C,yDAAsD;AAEtD,0CAAuC;AACvC,qDAA0D;AAE1D,eAAqB,SAAQ,iBAAO;IAKnC;QAEC,KAAK,CAAC;YACL,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,4BAA4B;YAClC,KAAK,EAAE,gBAAgB;YACvB,SAAS,EAAE,IAAI;SACf,CAAC,CAAC;IACJ,CAAC;IAGM,MAAM,CAAC,OAAgB,EAAE,CAAC,GAAG,CAAkB;QAErD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,6BAA6B,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;QAEzE,MAAM,KAAK,GAAW,WAAI,CAAC,GAAG,EAAE,CAAC;QAEjC,MAAM,QAAQ,GAAa,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACzF,MAAM,QAAQ,GAAW,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;QAE7D,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;QACzD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC;QAErC,MAAM,SAAS,GACd,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAE7D,0CAA0C;QAC1C,KAAK,MAAM,OAAO,IAAI,SAAS,CAAC,MAAM,EAAE;YAAE,OAAO,CAAC,OAAO,EAAE,CAAC;QAE5D,MAAM,GAAG,GAAW,WAAI,CAAC,GAAG,EAAE,CAAC;QAC/B,MAAM,GAAG,GAAW,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACxC,MAAM,IAAI,GAAW,CAAC,GAAG,GAAG,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,kBAAkB,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;IAC7E,CAAC;CACD;AApCA;IADC,eAAM,CAAC,gBAAgB,CAAC;0CACS;AAalC;IADC,yBAAK,CAAC,uBAAU,CAAC,QAAQ,CAAC;uCAuB1B;AAtCF,4BAuCC","file":"Reload.js","sourcesContent":["import { Collection } from 'discord.js';\nimport { Message } from '../../types/Message';\nimport { Command } from '../Command';\nimport { using } from '../CommandDecorators';\nimport { Middleware } from '../middleware/Middleware';\nimport { ResourceProxy } from '../../types/ResourceProxy';\nimport { Util } from '../../util/Util';\nimport { Logger, logger } from '../../util/logger/Logger';\n\nexport default class extends Command\n{\n\t@logger('Command:reload')\n\tprivate readonly _logger!: Logger;\n\n\tpublic constructor()\n\t{\n\t\tsuper({\n\t\t\tname: 'reload',\n\t\t\tdesc: 'Reload all custom commands',\n\t\t\tusage: '<prefix>reload',\n\t\t\townerOnly: true\n\t\t});\n\t}\n\n\t@using(Middleware.localize)\n\tpublic action(message: Message, [res]: [ResourceProxy]): Promise<Message | Message[]>\n\t{\n\t\tthis._logger.log(`Reloading commands from: $${this.client.commandsDir}`);\n\n\t\tconst start: number = Util.now();\n\n\t\tconst disabled: string[] = this.client.commands.filter(c => c.disabled).map(c => c.name);\n\t\tconst reloaded: number = this.client._reloadCustomCommands();\n\n\t\tthis._logger.log(`Re-initializing reloaded commands...`);\n\t\tthis.client.commands._initCommands();\n\n\t\tconst toDisable: Collection<string, Command> =\n\t\t\tthis.client.commands.filter(c => disabled.includes(c.name));\n\n\t\t// Re-disable previously disabled commands\n\t\tfor (const command of toDisable.values()) command.disable();\n\n\t\tconst end: number = Util.now();\n\t\tconst num: string = reloaded.toString();\n\t\tconst time: string = (end - start).toFixed(3);\n\t\treturn this.respond(message, res.CMD_RELOAD_SUCCESS({ number: num, time }));\n\t}\n}\n"],"sourceRoot":"../../../src"}